<html>
    <head>
        <title> Debouncing Example</title>
    </head>
    <body>
        <label>Search here :</label>
        <input type="text" id="search-bar"/>

        <script>

            // example 1
            // inputText.addEventListener("input", function(e){
            //     console.log("Entered Val:",e.target.value);
            //     console.log("No Of Times Key Pressed:",noOfKeyPress);
            //     noOfKeyPress++; 
            //     getSearchResult();   
            // })

            // const getSearchResult = debounce(() => {
            //     console.log("No Of Times Api Called:",noOfTimesApiCall);
            //     noOfTimesApiCall++;
            // },1000);

            // function debounce(getSearchResult, delay){
            //     let timer;
            //     return function(){
            //         clearTimeout(timer);
            //         timer = setTimeout(getSearchResult,delay)
            //     }
            // }

            // example 2 

            let inputText =  document.getElementById("search-bar");
            let noOfKeyPress = 0; 
            let noOfTimesApiCall = 0 ;

            let usingDebounceFunc  = debounce(getSearchResult,1000);

            function getSearchResult(){
                console.log("Network call :", noOfTimesApiCall);
                noOfTimesApiCall++;
            }

            function debounce(getSearchResult, delay){
                let timer;
                return function(){
                    clearTimeout(timer);
                    timer = setTimeout(getSearchResult,delay)
                }
            }
            
            inputText.addEventListener("input", function(e){
                console.log("Entered Val:",e.target.value);
                console.log("No Of Times Key Pressed:",noOfKeyPress);
                noOfKeyPress++; 
                usingDebounceFunc();
            });
          
            // Use Of Promises
          
             async function processArray(array){
                  const result=[];
                  for(const item of array){
                      const processedItem = await processItem(item);
                      result.push(processedItem);
                  }
                  return result;
              }
              const data = [1,2,3];
              //console.log(processArray(data));

              async function getData(){
                  return 'Hello';
              }

              //console.log(await getData()); // Hello

              async function fetchData(){
                  return Promise.reject('Error Occurred');
              }

              fetchData().then((result) => {
                  console.log(result);
              }).catch((err) => {
                  console.log(err); // Error occurred - because we have 
              });

        </script>

    </body>
</html>